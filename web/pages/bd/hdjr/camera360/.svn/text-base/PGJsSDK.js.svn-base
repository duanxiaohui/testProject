(function(){window.PG={debug:true,version:"0.0.1"};var g,e,f={},b=f,d=document.getElementsByTagName("title")[0].text,c={Default:{title:d,desc:d,link:window.location.href,imgUrl:"https://ss0.baidu.com/-Po3dSag_xI4khGko9WTAnF6hhy/super/pic/item/5882b2b7d0a20cf4429c319c72094b36acaf9961.jpg"},Timeline:{title:d,desc:d,link:window.location.href,imgUrl:"https://ss0.baidu.com/-Po3dSag_xI4khGko9WTAnF6hhy/super/pic/item/5882b2b7d0a20cf4429c319c72094b36acaf9961.jpg"}};document.addEventListener("PGJsSDK",function(a){console.log("PGJsSDK init success");g=a.bridge;e=a.priviteKey},false);PG.ready=function(h){try{g.init(f,function(j,i){if(i){i(ret)}})}catch(a){throw new Error("PG init fail")}finally{if(h){h(f)}}};b.checkJsApi=function(j,k){if(j.jsApiList){if(j.jsApiList.length<=0){throw new Error("checkJsApi list is empty!")}var a=false;for(var h=0;h<j.jsApiList;h++){if(j.jsApiList[h]=="shareUrl"){a=true}}if(!a){j.jsApiList.push("shareUrl")}g.callHandler("checkJsApi",j,function(i){k(i)})}};b.chooseImage=function(a,h){console.log("callHandler chooseImage");g.callHandler("chooseImage",a,function(i){h(i)})};b.downloadImage=function(a,h){console.log("callHandler downloadImage");g.callHandler("downloadImage",a,function(i){h(i)})};b.saveImage=function(a,h){console.log("callHandler saveImage");g.callHandler("saveImage",a,function(i){h(i)})};b.uploadImage=function(a,h){console.log("callHandler uploadImage");g.callHandler("uploadImage",a,function(i){h(i)})};b.showMenuItems=function(a,h){console.log("callHandler showMenuItems");g.callHandler("showMenuItems",a,function(i){h(i)})};b.shareImage=function(a,h){console.log("callHandler shareImage");g.callHandler("shareImage",a,function(i){h(i)})};b.onWebShareDefault=function(h){console.log("call onWebShareDefault");if(h instanceof Object){for(var a in h){c.Default[a]=h[a]}}else{throw new Error("onWebShareDefault: param must instanceof Object")}};b.onWebShareTimeline=function(h){console.log("call onWebShareTimeline");if(h instanceof Object){for(var a in h){c.Timeline[a]=h[a]}}else{throw new Error("onWebShareTimeline: param must instanceof Object")}};b._invokeWebShare=function(a){console.log("native call _invokeWebShare");if(this===e){var h=a=="wechatMoments"?c.Timeline:c.Default;var i={channel:a,shareData:h};g.callHandler("shareUrl",i,function(j){if(h.callback){h.callback()}})}else{throw new Error("warning: call this private method is not allowed!")}}})();(function(){var s={versions:function(){var v=navigator.userAgent,w=navigator.appVersion;return{trident:v.indexOf("Trident")>-1,presto:v.indexOf("Presto")>-1,webKit:v.indexOf("AppleWebKit")>-1,gecko:v.indexOf("Gecko")>-1&&v.indexOf("KHTML")==-1,mobile:!!v.match(/AppleWebKit.*Mobile.*/)||!!v.match(/AppleWebKit/),ios:!!v.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:v.indexOf("Android")>-1||v.indexOf("Linux")>-1,iPhone:v.indexOf("iPhone")>-1||v.indexOf("Mac")>-1,iPad:v.indexOf("iPad")>-1,webApp:v.indexOf("Safari")==-1}}()};if(window.WebViewJavascriptBridge){return}var b,i=[],q=[],g={};var d="wvjbscheme",a="__WVJB_QUEUE_MESSAGE__";var c={},k=1,o=null;priviteKey=new Object();function t(v){b=v.createElement("iframe");b.style.display="none";b.src=d+"://"+a;v.documentElement.appendChild(b)}function p(y,x){o=y;if(WebViewJavascriptBridge._messageHandler){throw new Error("PGBridge.init called twice")}WebViewJavascriptBridge._messageHandler=x;var v=q;q=null;for(var w=0;w<v.length;w++){r(v[w])}}function h(w,v){console.log("PGJsSDK call _send");m({data:w},v)}function f(v,w){console.log("PGJsSDK call registerHandler");g[v]=w}function e(v,x,w){console.log("PGJsSDK call callHandler");m({handlerName:v,data:x},w)}function m(w,v){console.log("PGJsSDK call _doSend");if(v){var x="cb_"+(k++)+"_"+new Date().getTime();c[x]=v;w["callbackId"]=x}i.push(w);if(s.versions.android){if(window.PinguoNativeAdr){window.PinguoNativeAdr.sendSignalToAdr()}else{throw new Error("Can not find PinguoNativeAdr in android")}}else{if(s.versions.ios){b.src=d+"://"+a}}}function j(){console.log("PGJsSDK call _fetchQueue");var v=JSON.stringify(i);i=[];if(s.versions.android){window.PinguoNativeAdr.setQueue(v)}else{return v}}function r(v){console.log("PGJsSDK call _dispatchMessageFromObjC");setTimeout(function w(){var B=JSON.parse(v);var A;if(B.responseId){var z=c[B.responseId];if(!z){return}z(B.responseData);delete c[B.responseId]}else{var z;if(B.callbackId){var C=B.callbackId;z=function(D){m({responseId:C,responseData:D})}}var y=WebViewJavascriptBridge._messageHandler;if(B.handlerName){y=g[B.handlerName]}try{y(B.data,z)}catch(x){if(typeof console!="undefined"){console.log("PGBridge: WARNING: javascript handler threw.",B,x)}}}})}function n(v){console.log("PGJsSDK call _handleMessageFromObjC");if(q){q.push(v)}else{r(v)}}window.WebViewJavascriptBridge={init:p,send:h,registerHandler:f,callHandler:e,_fetchQueue:j,_handleMessageFromObjC:n,_handleWebShare:function(v){if(!v){throw new Error("param needed in _handleWebShare")}console.log("PGJsSDK call _handleWebShare");if(o){o._invokeWebShare.call(priviteKey,v)
}}};var u=document;if(s.versions.ios){t(u)}var l=u.createEvent("Events");l.initEvent("PGJsSDK");l.bridge=WebViewJavascriptBridge;l.priviteKey=priviteKey;u.dispatchEvent(l)})();