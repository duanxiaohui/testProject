(function(){var b,c;$.route=function(f,e){f=f||{};var d;(b||(b=/([\d\w_]+)/g)).lastIndex=0;while((d=b.exec(e))!==null){f=f[d[0]];if(f==undefined){break;}}return f;};$.format=function(){var e=$.makeArray(arguments),g=String(e.shift()||""),d=[],f=e[0];e=$.isArray(f)?f:typeof(f)=="object"?e:[e];$.each(e,function(h,j){d.push(g.replace(c||(c=/\{([\d\w\.]+)\}/g),function(i,l,k){k=l==="INDEX"?h:l.indexOf(".")<0?j[l]:$.route(j,l);return k===undefined?i:($.isFunction(k)?k.call(j,l):k);}));});return d.join("");};var a;$.padWithZero=function(d){return d.replace((a||(a=/(^|\D)(\d)(?=$|\D)/g)),"$10$2");};})();function Calendar(a){this.date=a?new Date(+a):(G.currDate||new Date);}Calendar.prototype={getMonthFirstDate:function(){var a=new Date(+this.date);a.setDate(1);return a;},getCalendarFirstDate:function(c){var b=this.getMonthFirstDate(),a=b.getDay();b.setDate(b.getDate()-(c?a:a==0?6:(a-1)));return b;}};$.widget("meixx.webCalendar",{options:{defDate:new Date(),onselect:$.noop},_create:function(){var b=this,a=$(this.element),d=this.options;var c=this.today=d.defDate,e=c.getFullYear(),f=c.getMonth()+1;this.panel=a.find("ul.js-cld-panel");this.tmplDate='<li class="{monthClass}" date="{date}"><div class="date_box"><div class="icon"></div><div class="calendar_date">{solar}</div><div class="calendar_lunar">{lunar}</div></div></li>';this.initCalendar(e,f);d.onselect.call(b,c,lunar(c));this.handleClick();this.initDatePicker();},initCalendar:function(m,j,n,g,h){var q=this,e=$(this.element),b=this.options;var k=new Date(m,j-1,1),l=new Calendar(k),a=l.getCalendarFirstDate(),p=this.today,o;if(n){n=new Date(n);g=new Date(g);if(n<a){a=new Date(n);o=a.getDay();a.setDate(a.getDate()-(o==0?6:(o-1)));}}this.year=k.getFullYear();this.month=k.getMonth()+1;$("#sp_year").html(this.year);$("#sp_month").html(this.month);var i=new Date(a),f=$.map(new Array(42),function(C,t){var z=i.getFullYear(),c=i.getMonth(),x=i.getDate(),A=i.getDay(),r=lunar(i);var s=[],B="m"+(c+1)+"d"+x,u=r.festival(),v=false;if(worktime[z]){if(n){if(+i>=+n&&+i<=+g){worktime[z]["festival"][B]&&(v=true)&&s.push(worktime[z]["festival"][B],"vacation");worktime[z]["workday"][B]&&(v=true)&&s.push(worktime[z]["workday"][B]);}if(!v){s.push("befor");}}else{worktime[z]["festival"][B]&&s.push(worktime[z]["festival"][B],"vacation");worktime[z]["workday"][B]&&s.push(worktime[z]["workday"][B]);h==x&&c==j-1&&s.push("on");c!=q.month-1&&s.push("befor");x==p.getDate()&&c==p.getMonth()&&z==p.getFullYear()&&s.push("today");(A==0||A==6)&&s.push("weekend");r.term?s.push("solar"):u.length?s.push("isolar"):"";}}else{c!=q.month-1&&s.push("befor");x==p.getDate()&&c==p.getMonth()&&z==p.getFullYear()&&s.push("today");(A==0||A==6)&&s.push("weekend");r.term?s.push("solar"):u.length?s.push("isolar"):"";}i.setDate(i.getDate()+1);return $.format(q.tmplDate,{monthClass:s.join(" "),solar:x,lunar:u[0]&&u[0].desc.length<7&&u[0].desc||r.term||r.dateIndex==0&&(r.lMonth+"月"+(r.isBigMonth?"大":"小"))||r.lDate,date:[z,c+1,x].join("/")});});this.panel.css("opacity",0.2).html(f).fadeTo(200,1);h&&q.festivalClick(this.panel.find("li.on"));},setCalendarDate:function(c){var b=this,a=$(this.element),d=this.options;var e=c.getFullYear();var f=c.getMonth()+1;var c=c.getDate();$("#sp_year").html(e);$("#sp_month").html(f);b.initCalendar(e,f,undefined,undefined,c);},handleClick:function(){var b=this,a=$(this.element),c=this.options;$("li",b.panel).live("click",function(){b.panel.find("li.on").removeClass("on");b.panel.find("li.reston").removeClass("reston").addClass("rest");b.panel.find("li.workon").removeClass("workon").addClass("work");$("li",b.panel).removeClass("on liactive");var i=$(this).addClass("on liactive"),f=i.attr("date"),h=new Date(f),e=h.getFullYear(),g=h.getMonth()+1;if(g!=b.month){b.initCalendar(e,g);b.panel.find('li[date="'+f+'"]').addClass("on");b.panel.find('li[date="'+f+'"]').click();}else{c.onselect.call(b,h,lunar(h));}zoom();});},festivalClick:function(g){var b=this,a=$(this.element),c=this.options;var e=g.attr("date"),f=new Date(e);c.onselect.call(b,f,lunar(f));},initDatePicker:function(){var b=this,a=$(this.element),c=this.options;a.find("div.operate_btn a.operate_today").click(function(d){d.preventDefault();b.initCalendar(b.today.getFullYear(),b.today.getMonth()+1);b.panel.find("li.today").click();});a.find("div.operate_btn a.prev,div.operate_btn a.next").click(function(e){e.preventDefault();var d=$(this),f=d.attr("delta")-0;b.initCalendar(b.year,b.month+f);});},getYear:function(){return this.year;},getMonth:function(){return this.month;},getPanel:function(){return this.panel;}});$.widget("meixx.dayDetail",{options:{},_create:function(){var b=this,a=$(this.element),c=this.options;this.tmpl='<div class="alm_date">{padmonth}月{paddate}日 {week}</div><div class="alm_content e_clear">{istoday}		<div class="today_date">{date}</div><div class="smallcd_lunar"><p>【{animal}年】{lmonth}月{ldate}</p></div>		</div><div class="yj_box e_clear"><div class="yi"></div><div class="ji"></div></div>';},init:function(e,g){var j=this,c=$(this.element),b=this.options;var i=e.getFullYear(),f=e.getMonth()+1,h=e.getDate(),a=new Date();c.html($.format(this.tmpl,{year:i,padmonth:("0"+f).slice(-2),paddate:("0"+h).slice(-2),date:h,week:"星期"+g.cnDay,animal:g.animal,istoday:a.getDate()==h&&a.getMonth()==e.getMonth()&&a.getFullYear()==i?'<div class="today_icon"></div>':"",lmonth:g.lMonth,ldate:g.lDate,gzyear:g.gzYear,gzmonth:g.gzMonth,gzdate:g.gzDate}));this.loadLuckyData(i,f,h);},loadLuckyData:function(h,a,g){var c=this,b=$(this.element),e=this.options;var f="d"+("0"+a).slice(-2)+("0"+g).slice(-2);if(window.HuangLi&&HuangLi["y"+h]){this.fillLuckyData(HuangLi["y"+h][f]);}else{if(h>2007&&h<2021){$.getScript("http://baidu365.duapp.com/wannianlibaidu/js/huangli/hl"+h+".js",function(){c.fillLuckyData(HuangLi["y"+h][f]);});}else{this.fillLuckyData({y:"",j:""});}}},fillLuckyData:function(e){var b=this,a=$(this.element),d=this.options;var f=e.y.replace(/^\.|\.$/g,"").split("."),c=e.j.replace(/^\.|\.$/g,"").split(".");a.find("div.yi").html(dealString(f)).attr("title",f.join(" "));a.find("div.ji").html(dealString(c)).attr("title",c.join(" "));}});function dealString(a){a=a.sort(function(e,d){return e.length-d.length;});var c=[],b;$.each(a,function(d,e){c.push(e);});return c.slice(0,5).join("<br><hr>");}$.widget("zmc.vacationLayer",{options:{},_create:function(){var j=this,b=$(this.element),a=this.options;b.append(a.tmplHead+$.format(a.tmplBody,a.data)+a.tmplTail);b.click(function(k){k.preventDefault();k.stopPropagation();var l=$("div.vac_solar_layer",this),d=l.is(":visible");$("#div_buttons div.vac_solar_layer").not(l).hide().parent().removeClass("on");l[d?"hide":"show"]("fade").parent()[d?"removeClass":"addClass"]("on");});b.find("li").click(function(k){k.stopPropagation();var n=$(this),l=a.type=="v"?2016:($("#bd").webCalendar("getYear")-($("#bd").webCalendar("getMonth")==1?1:0)),d=n.attr("idx")-0;var m=a.type=="v"?n.attr("month")-0:Math.ceil((d+1)/2)+1;b.find("div.vac_solar_layer").hide();b.removeClass("on");if(a.type=="s"){$("#bd").webCalendar("initCalendar",l,m);$("#bd").webCalendar("getPanel").find("li:not(.befor).solar:"+(d%2?"last":"first")).addClass("on").click();}else{if(a.type=="v"){$("#bd").webCalendar("initCalendar",l,m,"2016"+n.attr("from"),"2016"+n.attr("to"));$(".vacation_exp").html(n.attr("exp"));}}});$("body").click(function(k){k.stopPropagation();var l=$("div.vac_solar_layer",this),d=l.is(":visible");$(".vacation_exp").text("");if(d){l.hide("fade");$("#div_buttons a").removeClass("on");}});if(a.bdParam.slice(0,4)!="rili"){if(a.bdParam=="jieqi"){a.type=="s"&&b.click();}if(a.bdParam=="jiaqi"){a.type=="v"&&b.click();}var c=/^([1-2]\d{3})[\/|\-](0?[1-9]|10|11|12)[\/|\-]([1-2]?[0-9]|0[1-9]|30|31)$/;ac=c.test(a.bdParam);if(ac){var f=a.bdParam.split("-");var i=f[0],g=parseInt(f[1],10),e=parseInt(f[2],10);var h=new Date();h.setFullYear(i);h.setMonth(g-1);h.setDate(e);$("#bd").webCalendar("setCalendarDate",h);}else{b.find('div.vac_solar_layer li[pinyin="'+a.bdParam+'"]').click();}}}});function zoom(){var b=$(window),g=$("#bd"),c=$(".yi"),h=$(".ji"),i=b.height(),f=b.width();if(b.width()>b.height()){g.removeClass("smallcd").removeClass("mi").addClass("bigcd");c.width(70);h.width(70);}else{g.removeClass("bigcd").addClass("smallcd");var a=$(".smallcd").find(".calendar_bg").width(),d=$(".smallcd").find(".alm_content").width(),e;}}(function(){var b,a;$.query=function(c){if(!b){b={};if(a=location.search.slice(1)+"&"+location.hash.slice(1)){$.each(a.split("&"),function(e,f,d,g){f=f.split("="),d=f[0],g=f[1];if(d in b){if($.isArray(b[d])){b[d].push(g);}else{b[d]=[b[d],g];}}else{b[d]=g;}});}}return b[c];};})();$(function(){var a=navigator.userAgent.toLowerCase();var b=a.match(/ipad/i)=="ipad";var d=a.match(/iphone os/i)=="iphone os";var g=a.match(/android/i)=="android";var f=a.match(/xiaomi/i)=="xiaomi";if(f){$(".down_iphon").attr("href","http://d2.365rili.com/coco.apk");}var e=$("#div_day_detail"),c=($.query("bd_param")||"").toLowerCase();e.dayDetail();$("#bd").webCalendar({defDate:c.slice(0,4)=="rili"&&c.indexOf("_")>-1?new Date(c.split("_")[1],0,1):void (0),onselect:function(i,h){e.dayDetail("init",i,h);}});zoom();$("#div_buttons a.operate_vacation").vacationLayer({type:"v",bdParam:c,tmplHead:'<div class="vac_solar_layer vac_layer none"><div class="arror_top"></div><h3>2016年公休放假安排</h3><ul class="e_clear">',tmplTail:"</ul></div>",tmplBody:'<li month="{month}" from="{from}" to="{to}" exp="{exp}" pinyin="{py}"><p class="name">{name}</p><p class="time">{time}</p></li>',data:festivalInfo});$("#div_buttons a.solar_terms").vacationLayer({type:"s",bdParam:c,tmplHead:'<div class="vac_solar_layer solar_layer none"><div class="arror_top"></div><h3>中国农历·二十四节气</h3><ul class="e_clear">',tmplTail:"</ul></div>",tmplBody:'<li idx="{INDEX}" pinyin="{py}"><p>{name}</p></li>',data:[{name:"立春",py:"lichun"},{name:"雨水",py:"yushui"},{name:"惊蛰",py:"jingzhe"},{name:"春分",py:"chunfen"},{name:"清明",py:"qingming"},{name:"谷雨",py:"guyu"},{name:"立夏",py:"lixia"},{name:"小满",py:"xiaoman"},{name:"芒种",py:"mangzhong"},{name:"夏至",py:"xiazhi"},{name:"小暑",py:"xiaoshu"},{name:"大暑",py:"dashu"},{name:"立秋",py:"liqiu"},{name:"处暑",py:"chushu"},{name:"白露",py:"bailu"},{name:"秋分",py:"qiufen"},{name:"寒露",py:"hanlu"},{name:"霜降",py:"shuangjiang"},{name:"立冬",py:"lidong"},{name:"小雪",py:"xiaoxue"},{name:"大雪",py:"daxue"},{name:"冬至",py:"dongzhi"},{name:"小寒",py:"xiaohan"},{name:"大寒",py:"dahan"}]});});